import e from"https://luiscastro193.github.io/PRNG/PRNG.js";import"https://cdn.jsdelivr.net/npm/chance@1.1.13/chance.min.js";import{unzip as t,zip as n}from"https://luiscastro193.github.io/zip-string/zip-string.js";var r=`Avión.Banco.Barco pirata.Base militar.Batalla campal.Carnaval.Casino.Circo.Colegio.Comisaría de policía.Crucero.Discoteca.Embajada.Estación espacial.Fiesta de empresa.Gasolinera.Hospital.Hotel.Parque de atracciones.Playa.Restaurante.Rodaje de una película.Sierra Nevada.Spa.Submarino.Supermercado.Teatro.Tren de pasajeros.Universidad.Zoológico`.split(`.`);const i=document.querySelector(`dialog`),a=document.querySelector(`textarea`),[o,s,c,l]=i.querySelectorAll(`button`);let u=r;if(location.hash){let e=await t(location.hash.slice(1)).catch(console.error);e?u=e.split(`
`):history.replaceState(null,``,` `)}window.onhashchange=()=>location.reload(),s.onclick=()=>i.close(),c.onclick=()=>{a.value=``},l.onclick=()=>{a.value=r.join(`
`)},o.onclick=async()=>{if(a.value=a.value.trim(),a.reportValidity()){let e=[...new Set(a.value.split(/\s+^\s*/m))].sort().join(`
`);e!=u.join(`
`)&&(e==r.join(`
`)?location.href=` `:location.hash=await n(e)),i.close()}},document.getElementById(`edit`).onclick=()=>{a.value=u.join(`
`),i.showModal()},document.getElementById(`share`).onclick=()=>{navigator.share?navigator.share({url:location.href}):navigator.clipboard.writeText(location.href).then(()=>alert(`Enlace copiado al portapapeles`)).catch(()=>alert(`Copia el enlace para compartir la lista de localizaciones`))},document.getElementById(`qr`).onclick=()=>{window.open(`https://luiscastro193.github.io/qr-generator/#`+encodeURIComponent(location.href))};const d=document.getElementById(`currentLocation`),f=document.querySelector(`form`),p=document.getElementById(`seed`),m=document.getElementById(`locationList`);chance=new Chance(Math.random);function h(){d.innerHTML=``}async function g(t){t.preventDefault();let n=new Chance(await e(p.value.toLowerCase()));n.integer({min:1,max:f.numPlayers.valueAsNumber})==f.player.valueAsNumber?d.innerHTML=`Eres el espía`:d.innerHTML=n.pickone(u)}f.oninput=h,f.onsubmit=g;async function _(){p.value=(p.value?new Chance(await e(p.value.toLowerCase())):chance).word({syllables:2}),f.oninput()}p.nextElementSibling.onclick=_;for(let e of document.querySelectorAll(`input`))e.addEventListener(`focus`,()=>e.select());function v(e){let t=document.createElement(`span`);return t.textContent=e,t}m.append(...chance.shuffle(u).map(v)),p.value=new Date().toLocaleDateString(`es-ES`),location.hash&&(p.value+=u.join(),_());function y(e,t){e.style.cssText+=`grid-column: span ${e.offsetWidth+t}`}let b=0;function x(e,t){let n=++b;requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(n==b){e.classList.contains(`smart-list-computed`)&&e.classList.replace(`smart-list-computed`,`smart-list`);for(let n of e.children)y(n,t);e.classList.replace(`smart-list`,`smart-list-computed`)}})})}document.fonts.ready.then(()=>new ResizeObserver(()=>x(m,15)).observe(m));